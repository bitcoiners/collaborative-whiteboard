<!DOCTYPE html>
<!--
  Collaborative Whiteboard - Main Interface
  =========================================
  
  This is the main HTML file for the Real-Time Collaborative Whiteboard application.
  It provides the structure and user interface for the collaborative drawing tool.
  
  Key Features of this HTML Structure:
  1. Responsive design with mobile support
  2. Real-time canvas for collaborative drawing
  3. Color palette with 10 color options
  4. Brush size slider with range control
  5. Action buttons (Clear Canvas, Undo)
  6. Connection status panel showing user count and connection state
  7. Canvas statistics (lines drawn counter, history size)
  8. Modular JavaScript architecture support
  
  HTML Structure Overview:
  - Header with application title and status indicators
  - Main content area divided into:
      * Left sidebar (controls and status panels)
      * Right canvas area (drawing surface)
  - Footer with informational content and stats
  
  Dependencies:
  - style.css: Local stylesheet for application styling
  - Font Awesome 6.4.0: CDN for icons
  - Socket.IO client: Auto-served by server for real-time communication
  - Modular JavaScript files (StateManager, CanvasManager, SocketManager, UIManager)
  - app.js: Main application orchestrator
  
  @file index.html
  @author Collaborative Whiteboard Team
  @version 3.0.0 - Modular Architecture
  @created 2024
  @lastmodified 2024-01-15
-->
<html lang="en">
<head>
    <!--
      Document Head - Metadata and Resources
      ======================================
      
      Contains essential metadata, page title, and external resource links.
    -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collaborative Whiteboard</title>
    
    <!--
      Favicon - Base64 encoded SVG
      ----------------------------
      Simple brush/board icon in application colors
      Prevents 404 errors for favicon.ico requests
    -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22%234b6cb7%22/><path d=%22M30,30 L70,30 L70,70 L30,70 Z%22 fill=%22none%22 stroke=%22white%22 stroke-width=%228%22/><path d=%22M40,40 L60,40 L60,60 L40,60 Z%22 fill=%22none%22 stroke=%22%23FFD700%22 stroke-width=%226%22/><circle cx=%2250%22 cy=%2250%22 r=%228%22 fill=%22white%22/></svg>">
    
    <!--
      Stylesheets
      -----------
      1. Local stylesheet for application-specific styling
      2. Font Awesome CDN for icon library
    -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!--
      Main Application Container
      ==========================
      
      Wraps the entire application content with consistent padding and centering.
      Provides the overall layout structure.
    -->
    <div class="container">
        
        <!--
          Application Header
          ==================
          
          Contains the main application title and status indicators.
          Uses gradient background and prominent typography for visual hierarchy.
        -->
        <header>
            <h1><i class="fas fa-paint-brush"></i> Collaborative Whiteboard</h1>
            <p class="subtitle">Draw together in real-time with others</p>
            
            <!-- Status Indicators -->
            <div class="header-status">
                <div class="status-item">
                    <span class="status-label">Status:</span>
                    <span id="connectionStatus" class="status-indicator">
                        <span class="status-dot"></span>
                        <span id="statusText">Connecting...</span>
                    </span>
                </div>
                <div class="status-item">
                    <span class="status-label">Users:</span>
                    <span id="userCount">0</span>
                </div>
                <div class="status-item">
                    <span class="status-label">ID:</span>
                    <span id="socketId" class="socket-id">-</span>
                </div>
            </div>
        </header>

        <!--
          Main Content Area
          =================
          
          Flex container that holds the sidebar (controls) and canvas area.
          Responsive design switches from horizontal to vertical layout on smaller screens.
        -->
        <div class="main-content">
            
            <!--
              Sidebar - Controls and Status Panels
              =====================================
              
              Fixed-width sidebar containing all user controls and connection information.
              Organized into two main panels: Controls and Status.
            -->
            <div class="sidebar">
                
                <!--
                  Controls Panel
                  ==============
                  
                  Contains all drawing controls organized into logical groups:
                  1. Color Picker - 10 color options with visual preview
                  2. Brush Size - Slider with range 1-20 pixels
                  3. Actions - Canvas management buttons (Clear, Undo)
                -->
                <div class="controls-panel">
                    <h2><i class="fas fa-sliders-h"></i> Controls</h2>
                    
                    <!--
                      Color Picker Control Group
                      --------------------------
                      
                      Grid of 10 color buttons with data-color attributes for JavaScript.
                      Selected color is visually indicated and shown in preview area.
                    -->
                    <div class="control-group">
                        <h3><i class="fas fa-palette"></i> Color Picker</h3>
                        <div class="color-palette">
                            <!-- Color buttons with data-color attribute for JavaScript binding -->
                            <button class="color-btn active" data-color="#000000" style="background-color: #000000;" title="Black"></button>
                            <button class="color-btn" data-color="#FF0000" style="background-color: #FF0000;" title="Red"></button>
                            <button class="color-btn" data-color="#00FF00" style="background-color: #00FF00;" title="Green"></button>
                            <button class="color-btn" data-color="#0000FF" style="background-color: #0000FF;" title="Blue"></button>
                            <button class="color-btn" data-color="#FFFF00" style="background-color: #FFFF00;" title="Yellow"></button>
                            <button class="color-btn" data-color="#FF00FF" style="background-color: #FF00FF;" title="Magenta"></button>
                            <button class="color-btn" data-color="#00FFFF" style="background-color: #00FFFF;" title="Cyan"></button>
                            <button class="color-btn" data-color="#FFA500" style="background-color: #FFA500;" title="Orange"></button>
                            <button class="color-btn" data-color="#8B4513" style="background-color: #8B4513;" title="Brown"></button>
                            <button class="color-btn" data-color="#FFFFFF" style="background-color: #FFFFFF; border: 2px solid #ccc;" title="White"></button>
                        </div>
                        <!-- Selected Color Display -->
                        <div class="selected-color-display">
                            <span>Selected: </span>
                            <div class="color-preview" id="selectedColorPreview" style="background-color: #000000;"></div>
                            <span id="selectedColorHex">#000000</span>
                        </div>
                    </div>

                    <!--
                      Brush Size Control Group
                      ------------------------
                      
                      Range slider for selecting brush thickness with visual feedback.
                    -->
                    <div class="control-group">
                        <h3><i class="fas fa-brush"></i> Brush Size</h3>
                        <div class="brush-controls">
                            <input type="range" id="brushSize" min="1" max="20" value="4" class="brush-slider">
                            <div class="brush-size-info">
                                <span>Size: </span>
                                <span id="brushSizeValue">4px</span>
                                <div class="brush-preview" id="brushPreview"></div>
                            </div>
                        </div>
                    </div>

                    <!--
                      Actions Control Group
                      ---------------------
                      
                      Canvas management buttons with appropriate styling:
                      1. Clear Canvas (red/danger button) - Clears canvas for all users
                      2. Undo (gray/secondary button) - Undoes last local drawing action
                    -->
                    <div class="control-group">
                        <h3><i class="fas fa-tools"></i> Actions</h3>
                        <div class="action-buttons">
                            <button id="clearBtn" class="btn-danger">
                                <i class="fas fa-trash-alt"></i> Clear Canvas
                            </button>
                            <button id="undoBtn" class="btn-secondary">
                                <i class="fas fa-undo"></i> Undo
                            </button>
                        </div>
                    </div>
                </div>

                <!--
                  Statistics Panel
                  ================
                  
                  Displays real-time drawing statistics and application state.
                -->
                <div class="stats-panel">
                    <h2><i class="fas fa-chart-bar"></i> Statistics</h2>
                    <div class="stats-info">
                        <div class="stat-item">
                            <span class="stat-label">Lines drawn:</span>
                            <span id="linesDrawn" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">History size:</span>
                            <span id="historySize" class="stat-value">0 items</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Offline buffer:</span>
                            <span id="offlineBufferSize" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Brush size:</span>
                            <span id="currentBrushSize" class="stat-value">4px</span>
                        </div>
                    </div>
                </div>

                <!--
                  Debug Panel (Optional - visible in development)
                  ===============================================
                  
                  Hidden by default, can be shown for debugging purposes.
                -->
                <div class="debug-panel" style="display: none;">
                    <h2><i class="fas fa-bug"></i> Debug</h2>
                    <div class="debug-actions">
                        <button onclick="window.debugState()" class="btn-debug">
                            <i class="fas fa-code"></i> Show State
                        </button>
                        <button onclick="window.resetApp()" class="btn-debug">
                            <i class="fas fa-redo"></i> Reset App
                        </button>
                        <button onclick="window.location.reload()" class="btn-debug">
                            <i class="fas fa-sync"></i> Reload
                        </button>
                    </div>
                </div>
            </div>

            <!--
              Canvas Container
              ================
              
              Main drawing area containing the canvas and related information.
              Flex-grow property allows canvas to fill available space.
            -->
            <div class="canvas-container">
                <!-- Canvas Header with Title and Instructions -->
                <div class="canvas-header">
                    <h2><i class="fas fa-draw-polygon"></i> Shared Canvas</h2>
                    <div class="canvas-instruction">
                        <i class="fas fa-mouse-pointer"></i> Click and drag to draw. Your drawings appear instantly for all users.
                    </div>
                </div>
                
                <!--
                  Whiteboard Canvas Element
                  =========================
                  
                  HTML5 Canvas element for drawing surface.
                  Features:
                  - ID: "whiteboard" (referenced in JavaScript)
                  - Initial dimensions: 800x600 (scaled dynamically)
                  - Fallback text for browsers without canvas support
                  - Crosshair cursor for precise drawing
                -->
                <div class="canvas-wrapper">
                    <canvas id="whiteboard" width="800" height="600">
                        Your browser does not support the canvas element.
                    </canvas>
                    <div class="canvas-overlay" id="canvasOverlay">
                        <div class="overlay-content">
                            <i class="fas fa-paint-brush"></i>
                            <p>Click and drag to start drawing</p>
                        </div>
                    </div>
                </div>  
            </div>
        </div>

        <!--
          Application Footer
          ==================
          
          Informational footer with technology credits and current year.
          Dark background with light text for visual separation.
        -->
        <footer>
            <div class="footer-content">
                <div class="footer-left">
                    <p>
                        <i class="fas fa-code"></i> Built with Node.js, Socket.IO & HTML5 Canvas |
                        <span id="currentYear"></span>
                    </p>
                </div>
                <div class="footer-right">
                    <p>
                        Real-time collaboration | Modular Architecture v3.0
                    </p>
                </div>
            </div>
        </footer>
    </div>

    <!--
      JavaScript Dependencies and Application Logic
      =============================================
      
      Script loading order is important:
      1. Socket.IO client library (auto-served by server)
      2. Module definitions (StateManager, CanvasManager, SocketManager, UIManager)
      3. Main application orchestrator (app.js)
      4. Inline scripts for page-specific functionality
    -->
    
    <!-- Socket.IO client library (automatically served by the server) -->
    <script src="/socket.io/socket.io.js"></script>
    
    <!-- Module Definitions -->
    <script src="modules/StateManager.js"></script>
    <script src="modules/UIManager.js"></script>
    <script src="modules/SocketManager.js"></script>
    <script src="modules/CanvasManager.js"></script>
    
    <!-- Main Application Orchestrator -->
    <script src="app.js"></script>
    
    <!--
      Inline JavaScript
      =================
      
      Page-specific JavaScript that doesn't belong in the main application module.
      Currently handles setting the current year in the footer and debug functions.
    -->
    <script>
        // Set current year in footer for copyright/attribution
        document.getElementById('currentYear').textContent = new Date().getFullYear();
        
        // Debug functions (available in development mode)
        window.debugState = function() {
            if (window.whiteboard) {
                console.log('Application State:', window.whiteboard.getState());
                console.log('Modules:', window.whiteboard.modules);
                alert('State logged to console. Press F12 to view.');
            } else {
                console.log('Whiteboard not initialized yet');
            }
        };
        
        window.resetApp = function() {
            if (window.whiteboard && confirm('Reset application state?')) {
                window.whiteboard.resetState();
                alert('Application state reset');
            }
        };
        
        // Brush size preview
        function updateBrushPreview() {
            const brushSize = document.getElementById('brushSize').value;
            const preview = document.getElementById('brushPreview');
            if (preview) {
                preview.style.width = brushSize + 'px';
                preview.style.height = brushSize + 'px';
                preview.style.borderRadius = brushSize + 'px';
            }
        }
        
        // Initialize brush preview
        document.addEventListener('DOMContentLoaded', function() {
            const brushSlider = document.getElementById('brushSize');
            if (brushSlider) {
                brushSlider.addEventListener('input', updateBrushPreview);
                updateBrushPreview(); // Initial update
            }
            
            // Toggle debug panel with Ctrl+Shift+D
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.shiftKey && e.key === 'D') {
                    const debugPanel = document.querySelector('.debug-panel');
                    if (debugPanel) {
                        debugPanel.style.display = debugPanel.style.display === 'none' ? 'block' : 'none';
                        console.log('Debug panel toggled');
                    }
                }
            });
        });
        
        // Show connection status in console
        console.log('üé® Collaborative Whiteboard Loading...');
        console.log('üìù Modular Architecture v3.0');
        console.log('üåê Socket.IO ready for real-time collaboration');
    </script>
</body>
</html>
<!--
  End of Collaborative Whiteboard HTML Document
  =============================================
  
  This file provides the complete structure for the collaborative drawing interface.
  All interactive elements are properly wired to JavaScript modules.
  
  Modular Architecture Components:
  - StateManager: Centralized state management
  - CanvasManager: Drawing operations and canvas handling
  - SocketManager: Network communication and real-time sync
  - UIManager: User interface and event handling
  
  @see app.js for application orchestration
  @see style.css for visual styling and responsive design
  @see server.js for Socket.IO server implementation
-->
